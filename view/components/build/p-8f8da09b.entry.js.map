{"version":3,"sources":["src/components/usersPage/dialog-component/dialog-component.css?tag=dialog-component&encapsulation=scoped","src/components/usersPage/dialog-component/dialog-component.tsx"],"names":["dialogComponentCss","DialogComponent","[object Object]","hostRef","this","isModalOpen","parsedPermissions","loading","JSON","parse","permissions","e","preventDefault","axios","post","url","email","value","Swal","fire","position","icon","text","showConfirmButton","timer","err","console","log","title","response","data","message","toggleModalState","event","target","h","Host","disabled","hasAccess","name","permission","clickHandler","varient","startIcon","xmlns","class","fill","viewBox","stroke","stroke-width","stroke-linecap","stroke-linejoin","d","onSubmit","handleSubmit","action","aria-labelledby","role","aria-modal","aria-hidden","id","type","required","placeholder","onInput","handleChange","color"],"mappings":"sLAAA,MAAMA,EAAqB,4CCUdC,EAAe,MAL5BC,YAAAC,aAQWC,KAAAC,YAAc,MAEdD,KAAAE,kBAAwB,GACxBF,KAAAG,QAAU,MAEnBL,oBACEE,KAAKE,kBAAoBE,KAAKC,MAAML,KAAKM,aAG3CR,mBACEE,KAAKC,aAAeD,KAAKC,YAG3BH,mBAAmBS,GACjBP,KAAKG,QAAU,KACfI,EAAEC,iBACF,UACQC,EAAMC,KAAKV,KAAKW,IAAK,CACzBC,MAAOZ,KAAKa,QAEdb,KAAKG,QAAU,MACfW,EAAKC,KAAK,CACRC,SAAU,SACVC,KAAM,UACNC,KAAM,gCACNC,kBAAmB,MACnBC,MAAO,OAETpB,KAAKa,MAAQ,GACb,MAAOQ,GACPrB,KAAKG,QAAU,MACfmB,QAAQC,IAAIF,GACZP,EAAKC,KAAK,CACRE,KAAM,QACNO,MAAO,UACPN,KAAMG,EAAII,SAASC,KAAKC,UAI5B3B,KAAK4B,mBAGP9B,aAAa+B,GACX7B,KAAKa,MAAQgB,EAAMC,OAAOjB,MAG5Bf,SACE,OACEiC,EAACC,EAAI,KAEHD,EAAA,2BAAA,CACEE,UAAWC,EAAUlC,KAAKE,kBAAmB,CAAEiC,KAAM,QAASC,WAAY,UAC1EC,aAAc,IAAMrC,KAAK4B,mBACzBU,QAAQ,WACRC,UACER,EAAA,MAAA,CAAKS,MAAM,6BAA6BC,MAAM,mCAAmCC,KAAK,OAAOC,QAAQ,YAAYC,OAAO,eAAcC,eAAc,KAClJd,EAAA,OAAA,CAAAe,iBAAqB,QAAOC,kBAAiB,QAAQC,EAAE,2FACnD,gBAOThD,KAAKC,aACJ8B,EAAA,OAAA,CAAMkB,SAAU1C,GAAKP,KAAKkD,aAAa3C,GAAIkC,MAAM,iBAAiBU,OAAO,WACvEpB,EAAA,MAAA,CAAKU,MAAM,qCAAoCW,kBAAiB,cAAcC,KAAK,SAAQC,aAAY,QACrGvB,EAAA,MAAA,CAAKU,MAAM,0FACTV,EAAA,MAAA,CAAKU,MAAM,6DAA4Dc,cAAa,SAGpFxB,EAAA,OAAA,CAAMU,MAAM,qDAAoDc,cAAa,QAAM,KAInFxB,EAAA,MAAA,CAAKU,MAAM,qKACTV,EAAA,MAAA,CAAKU,MAAM,0CACTV,EAAA,MAAA,CAAKU,MAAM,0BACTV,EAAA,MAAA,CAAKU,MAAM,oHACTV,EAAA,MAAA,CAAKS,MAAM,6BAA6BC,MAAM,uBAAuBC,KAAK,OAAOC,QAAQ,YAAYC,OAAO,eAAcC,eAAc,KACtId,EAAA,OAAA,CAAAe,iBAAqB,QAAOC,kBAAiB,QAAQC,EAAE,wDAG3DjB,EAAA,MAAA,CAAKU,MAAM,iDACTV,EAAA,KAAA,CAAIU,MAAM,8CAA8Ce,GAAG,eAAa,mBAGxEzB,EAAA,MAAA,CAAKU,MAAM,QACTV,EAAA,IAAA,CAAGU,MAAM,8BAA4B,2EACrCV,EAAA,QAAA,CACE0B,KAAK,QACLtB,KAAK,QACLuB,SAAQ,KACRC,YAAY,oBACZlB,MAAM,6CACN5B,MAAOb,KAAKa,MACZ+C,QAAS/B,GAAS7B,KAAK6D,aAAahC,SAM9CE,EAAA,MAAA,CAAKU,MAAM,kEACTV,EAAA,2BAAA,CACE0B,KAAK,SACLK,MAAM,WACNvB,UACER,EAAA,MAAA,CAAKS,MAAM,6BAA6BE,KAAK,OAAOC,QAAQ,YAAWE,eAAc,MAAMD,OAAO,eAAeH,MAAM,WACrHV,EAAA,OAAA,CAAAe,iBAAqB,QAAOC,kBAAiB,QAAQC,EAAE,iGAG3D7C,QAASH,KAAKG,SAAO,eAIvB4B,EAAA,2BAAA,CAA0BM,aAAc,IAAMrC,KAAK4B,mBAAoBU,QAAQ,YAAU","sourcesContent":[":host {\n  display: block;\n}\n\n/* .disabled-custom:disabled{\n  opacity: 0.5;\n  color: rgb(164, 164, 164);\n} */","import { Component, Host, h, State, Prop } from '@stencil/core';\nimport axios from 'axios';\nimport Swal from 'sweetalert2';\nimport { hasAccess } from '../../../utils/utils';\n\n@Component({\n  tag: 'dialog-component',\n  styleUrl: 'dialog-component.css',\n  scoped: true,\n})\nexport class DialogComponent {\n  @Prop() url: string;\n  @Prop() permissions: string;\n  @State() isModalOpen = false;\n  @State() value: string;\n  @State() parsedPermissions: [] = [];\n  @State() loading = false;\n\n  componentWillLoad() {\n    this.parsedPermissions = JSON.parse(this.permissions);\n  }\n\n  toggleModalState() {\n    this.isModalOpen = !this.isModalOpen;\n  }\n\n  async handleSubmit(e) {\n    this.loading = true;\n    e.preventDefault();\n    try {\n      await axios.post(this.url, {\n        email: this.value,\n      });\n      this.loading = false;\n      Swal.fire({\n        position: 'center',\n        icon: 'success',\n        text: 'Invitation sent successfully!',\n        showConfirmButton: false,\n        timer: 1500,\n      });\n      this.value = '';\n    } catch (err) {\n      this.loading = false;\n      console.log(err);\n      Swal.fire({\n        icon: 'error',\n        title: 'Oops...',\n        text: err.response.data.message,\n      });\n    }\n\n    this.toggleModalState();\n  }\n\n  handleChange(event) {\n    this.value = event.target.value;\n  }\n\n  render() {\n    return (\n      <Host>\n        {/* Modal Button */}\n        <icon-label-submit-button\n          disabled={!hasAccess(this.parsedPermissions, { name: 'users', permission: 'write' })}\n          clickHandler={() => this.toggleModalState()}\n          varient=\"outlined\"\n          startIcon={\n            <svg xmlns=\"http://www.w3.org/2000/svg\" class=\"-ml-1 mr-2 h-5 w-5 text-gray-500\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\" stroke-width=\"2\">\n              <path stroke-linecap=\"round\" stroke-linejoin=\"round\" d=\"M18 9v3m0 0v3m0-3h3m-3 0h-3m-2-5a4 4 0 11-8 0 4 4 0 018 0zM3 20a6 6 0 0112 0v1H3v-1z\" />\n            </svg>\n          }\n        >\n          Add New User\n        </icon-label-submit-button>\n\n        {/* Main Modal */}\n        {this.isModalOpen && (\n          <form onSubmit={e => this.handleSubmit(e)} class=\"pt-6 space-y-3\" action=\"/invite\">\n            <div class=\"fixed z-10 inset-0 overflow-y-auto\" aria-labelledby=\"modal-title\" role=\"dialog\" aria-modal=\"true\">\n              <div class=\"flex items-end justify-center min-h-screen pt-4 px-4 pb-20 text-center sm:block sm:p-0\">\n                <div class=\"fixed inset-0 bg-gray-500 bg-opacity-75 transition-opacity\" aria-hidden=\"true\"></div>\n\n                {/* <!-- This element is to trick the browser into centering the modal contents. --> */}\n                <span class=\"hidden sm:inline-block sm:align-middle sm:h-screen\" aria-hidden=\"true\">\n                  &#8203;\n                </span>\n\n                <div class=\"relative inline-block align-bottom bg-white rounded-lg text-left overflow-hidden shadow-xl transform transition-all sm:my-8 sm:align-middle sm:max-w-lg sm:w-full\">\n                  <div class=\"bg-white px-4 pt-5 pb-4 sm:p-6 sm:pb-4\">\n                    <div class=\"sm:flex sm:items-start\">\n                      <div class=\"mx-auto flex-shrink-0 flex items-center justify-center h-12 w-12 rounded-full bg-sky-100 sm:mx-0 sm:h-10 sm:w-10\">\n                        <svg xmlns=\"http://www.w3.org/2000/svg\" class=\"h-6 w-6 text-sky-600\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\" stroke-width=\"2\">\n                          <path stroke-linecap=\"round\" stroke-linejoin=\"round\" d=\"M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z\" />\n                        </svg>\n                      </div>\n                      <div class=\"mt-3 text-center sm:mt-0 sm:ml-4 sm:text-left\">\n                        <h3 class=\"text-lg leading-6 font-medium text-gray-900\" id=\"modal-title\">\n                          Send Invitation\n                        </h3>\n                        <div class=\"mt-2\">\n                          <p class=\"text-sm text-gray-500 mb-4\">Are you sure you want to send invitation? Enter email of the recipient.</p>\n                          <input\n                            type=\"email\"\n                            name=\"email\"\n                            required\n                            placeholder=\"email@example.com\"\n                            class=\"border w-full px-4 py-2 rounded-md text-sm\"\n                            value={this.value}\n                            onInput={event => this.handleChange(event)}\n                          />\n                        </div>\n                      </div>\n                    </div>\n                  </div>\n                  <div class=\"bg-gray-50 px-4 py-3 sm:px-6 sm:flex sm:flex-row-reverse gap-4\">\n                    <icon-label-submit-button\n                      type=\"submit\"\n                      color=\"tertiary\"\n                      startIcon={\n                        <svg xmlns=\"http://www.w3.org/2000/svg\" fill=\"none\" viewBox=\"0 0 24 24\" stroke-width=\"1.5\" stroke=\"currentColor\" class=\"w-5 h-5\">\n                          <path stroke-linecap=\"round\" stroke-linejoin=\"round\" d=\"M6 12L3.269 3.126A59.768 59.768 0 0121.485 12 59.77 59.77 0 013.27 20.876L5.999 12zm0 0h7.5\" />\n                        </svg>\n                      }\n                      loading={this.loading}\n                    >\n                      Send Invite\n                    </icon-label-submit-button>\n                    <icon-label-submit-button clickHandler={() => this.toggleModalState()} varient=\"outlined\">\n                      Cancel\n                    </icon-label-submit-button>\n                  </div>\n                </div>\n              </div>\n            </div>\n          </form>\n        )}\n      </Host>\n    );\n  }\n}\n"]}