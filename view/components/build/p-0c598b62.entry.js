import{r as t,h as s,H as e}from"./p-62aab1e1.js";let i=class{constructor(s){t(this,s);this.page=1;this.isLoading=false;this.isLoadingError=false;this.toggleSort=true}componentWillLoad(){this.rowPerPage=this.rowPerPage.sort(((t,s)=>t-s));this.limit=this.rowPerPage.slice(0,1).shift();this.fetchData()}fetchData(){this.isLoading=true;this.isLoadingError=false;this.api(this.limit,this.page,this.sortObj,this.search).then((t=>{t.data.respond.map((t=>{t.isCustomQuery===true?t["isCustomQuery"]="Custom Query":t["isCustomQuery"]="Builder Query"}));this.total=t.data.total;this.data=t.data.respond;if(this.autocompute)this.computeHeader();this.isLoading=false})).catch((t=>{console.log(t);this.isLoadingError=true;this.isLoading=false}))}computeHeader(){const t=Object.keys(this.data.slice(0,1).shift());this.headerList=t.map((t=>({title:t,alias:t,filter:{searchable:!/^-?\d+$/.test(this.data.slice(0,1).shift()[`${t}`]),sortable:/^-?\d+$/.test(this.data.slice(0,1).shift()[`${t}`])}})))}rowsHandler(t){this.limit=t.target.value;this.page=1;this.sortObj={};this.fetchData()}clearSearch(t){if(Object.keys(this.search).length>=1){let s=Object.keys(this.search);if(s.includes(t)){delete this.search[t]}}this.fetchData()}nextPage(){++this.page;this.fetchData()}prevPage(){--this.page;this.fetchData()}toggleSortMethod(t){this.sortObj={id:t,dir:this.toggleSort?"asc":"desc"};this.page=1;this.toggleSort=!this.toggleSort;this.fetchData()}searchMethod(t,s){if(this.search){this.search[s]=t}else{this.search=[];this.search[s]=t}this.fetchData()}render(){return s(e,null,s("logs-table",{isLoading:this.isLoading,isLoadingError:this.isLoadingError,tableBody:this.data,tableHeader:this.headerList,currentPage:this.page,dataLength:this.total,next:()=>this.nextPage(),prev:()=>this.prevPage(),limit:this.limit,rows:this.rowPerPage,rowsHandler:t=>this.rowsHandler(t),toggleSortMethod:t=>this.toggleSortMethod(t),searchMethod:(t,s)=>this.searchMethod(t,s),clearSearch:t=>this.clearSearch(t)}))}};const a=s("svg",{xmlns:"http://www.w3.org/2000/svg",class:"inline h-4 w-4 text-indigo-600",viewBox:"0 0 20 20",fill:"currentColor"},s("path",{d:"M5 12a1 1 0 102 0V6.414l1.293 1.293a1 1 0 001.414-1.414l-3-3a1 1 0 00-1.414 0l-3 3a1 1 0 001.414 1.414L5 6.414V12zM15 8a1 1 0 10-2 0v5.586l-1.293-1.293a1 1 0 00-1.414 1.414l3 3a1 1 0 001.414 0l3-3a1 1 0 00-1.414-1.414L15 13.586V8z"}));const l=s("svg",{xmlns:"http://www.w3.org/2000/svg",class:"inline h-4 w-4 text-indigo-600",viewBox:"0 0 20 20",fill:"currentColor"},s("path",{"fill-rule":"evenodd",d:"M8 4a4 4 0 100 8 4 4 0 000-8zM2 8a6 6 0 1110.89 3.476l4.817 4.817a1 1 0 01-1.414 1.414l-4.816-4.816A6 6 0 012 8z","clip-rule":"evenodd"}));let r=class{constructor(s){t(this,s);this.isSearchMenuOpen=false}componentWillRender(){this.from=(this.currentPage-1)*this.limit+1;this.to=this.currentPage*this.limit}dataFormatter(t,e){{if(t.click.clickable===false){if(e[t.alias].length>25===true){return e[t.alias].slice(0,25)+"..."}else{if(/\d{4}-\d{2}-\d{2}T\d{2}:\d{2}:\d{2}\.\d{3}Z/.test(e[t.alias])){return new Date(e[t.alias]).toString().split("(")[0]}else{if(t.alias==="timeTaken"){return`${e[t.alias]} ms`}else{return e[t.alias]}}}}else{if(t.alias==="queryResult"){return s("a",{target:"_blank",href:t.click.url+e[t.alias],class:"flex items-center py-1 px-4 text-base font-normal text-gray-900 rounded-lg bg-gray-200"},s("img",{class:"h-4",src:t.click.icon,alt:"icon"}),s("span",{class:"px-2 "},"View"))}else if(t.alias==="email"){return s("a",{href:t.click.url+e["ownerId"]},s("span",{class:"px-2 "},e[t.alias]))}}}}render(){const t=[];for(let e=1;e<this.rows[0];e++){t.push(s("tr",null,s("td",{class:"px-6 py-4 whitespace-nowrap text-sm text-gray-900"}," ")))}return s("div",{style:{overflowY:"auto"}},s("div",{class:"custom-scrollbar ",style:{maxWidth:"75rem",maxHeight:"580px",overflow:"auto"}},s("table",{class:"table-auto h-full min-w-full divide-y border border-gray-100 divide-gray-200 relative"},s("thead",{class:"bg-gray-100 sticky top-0"},s("tr",null,this.tableHeader.map((t=>{var e,i;return s("th",{scope:"col",class:"px-6 py-3 text-left text-xs font-medium text-gray-500 hover:text-indigo-700 uppercase tracking-wider"},t.title,((e=t===null||t===void 0?void 0:t.filter)===null||e===void 0?void 0:e.sortable)&&s("button",{class:"ml-3",onClick:()=>this.toggleSortMethod(t.title)},a),((i=t===null||t===void 0?void 0:t.filter)===null||i===void 0?void 0:i.searchable)&&s("drop-down",{searchMethod:(t,s)=>this.searchMethod(t,s),alias:t.alias,clearSearch:t=>this.clearSearch(t)},l))})),this.isLoading&&s("th",{class:"text-gray-500 "}," "))),this.isLoading&&s("tbody",null,s("tr",null,s("td",{colSpan:this.tableHeader.length,rowSpan:10,class:"px-6 py-4 whitespace-nowrap text-sm text-gray-900"},s("loader-component",null)),s("td",{class:"px-6 py-4 whitespace-nowrap text-sm text-gray-900"}," ")),t),s("tbody",{class:"bg-white divide-y divide-gray-200"},this.tableBody&&!this.isLoading&&!this.isLoadingError&&this.tableBody.map((t=>s("tr",{class:"hover:bg-gray-100 transition"},this.tableHeader.map((e=>s("td",{"text-overflow:ellipsis":true,title:t[e.alias],"max-width":"50px",class:"px-6 py-3 whitespace-nowrap text-sm text-gray-900"},this.dataFormatter(e,t)))))))),!this.isLoading&&this.isLoadingError&&s("tbody",null,s("tr",null,s("td",{colSpan:this.tableHeader.length,rowSpan:10,class:"px-6 py-4 whitespace-nowrap text-sm text-center text-gray-900"},s("p",null,"Error Found")),s("td",{class:"px-6 py-4 whitespace-nowrap text-sm text-gray-900"}," ")),t))),s("div",{style:{maxWidth:"75rem"},class:"bg-gray-100 sticky bottom-0"},s("div",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},s("div",{class:"flex justify-between items-center"},s("p",null,"Showing ",s("strong",null,this.from)," to ",s("strong",null,this.to<=Number(this.dataLength)?this.to:this.dataLength)," of ",s("strong",null,this.dataLength)," ","results"),s("div",{class:"space-x-3"},s("span",null,"Rows per page"),s("select",{onChange:t=>this.rowsHandler(t),class:"form-select px-3 py-1.5 border-none text-inherit font-inherit text-gray-700 bg-transparent bg-clip-padding bg-no-repeat rounded transition ease-in-out focus:text-gray-700 focus:bg-white focus:border-blue-600 focus:outline-none"},this.rows.map((t=>s("option",{value:`${t}`},t))))),s("nav",{class:"flex gap-4 items-center"},s("plain-button",{color:"gray-500",type:"text",clickHandler:()=>this.prev(),disabledHandler:this.currentPage===1,addClass:"disabled:opacity-50"},"prev"),s("plain-button",{color:"gray-500",type:"text",clickHandler:()=>this.next(),disabledHandler:parseInt(this.dataLength)<=this.to,addClass:"disabled:opacity-50"},"next")))),this.isLoading&&s("td",{class:"text-gray-500"}," ")))}};export{i as log_table_wrapper,r as logs_table};
//# sourceMappingURL=p-0c598b62.entry.js.map