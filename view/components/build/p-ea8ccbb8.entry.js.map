{"version":3,"sources":["src/components/usersPage/all-users/all-users.css?tag=all-users&encapsulation=scoped","src/components/usersPage/all-users/all-users.tsx"],"names":["allUsersCss","AllUsers","[object Object]","hostRef","this","limitbackend","offsetbackend","parsedPermissions","limit","offset","loading","refresh","window","location","assign","nextHandler","count","prevHandler","jumpPageHandler","pageNumber","updatedUsers","JSON","parse","users","permissions","axios","get","url","then","res","allPermissions","data","catch","err","console","log","h","Host","class","totalData"],"mappings":"sFAAA,MAAMA,EAAc,qCCQPC,EAAQ,MALrBC,YAAAC,aAUUC,KAAAC,aAAuB,EACvBD,KAAAE,cAAwB,EAEvBF,KAAAG,kBAAwB,GAExBH,KAAAI,MAAgB,GAChBJ,KAAAK,OAAiB,EACjBL,KAAAM,QAAU,MAEnBN,KAAAO,QAAU,KACRC,OAAOC,SAASC,OAAO,iBAAiBV,KAAKK,gBAAgBL,KAAKI,UAkBpEJ,KAAAW,YAAc,KACZX,KAAKM,QAAU,KACf,GAAIN,KAAKK,OAASL,KAAKI,MAAQJ,KAAKY,MAAOZ,KAAKK,OAASL,KAAKK,OAASL,KAAKI,MAC5EJ,KAAKO,UACLP,KAAKM,QAAU,OAEjBN,KAAAa,YAAc,KACZb,KAAKM,QAAU,KACf,GAAIN,KAAKK,OAASL,KAAKI,OAAS,EAAGJ,KAAKK,OAASL,KAAKK,OAASL,KAAKI,MACpEJ,KAAKO,UACLP,KAAKM,QAAU,OAEjBN,KAAAc,gBAAkBC,IAChBf,KAAKM,QAAU,KACfN,KAAKK,OAASU,EAAaf,KAAKI,MAAQJ,KAAKI,MAC7CJ,KAAKO,UACLP,KAAKM,QAAU,OA/BjBR,oBACEE,KAAKI,MAAQJ,KAAKC,aAClBD,KAAKK,OAASL,KAAKE,cACnBF,KAAKgB,aAAeC,KAAKC,MAAMlB,KAAKmB,OACpCnB,KAAKG,kBAAoBc,KAAKC,MAAMlB,KAAKoB,aAEzCC,EACGC,IAAI,GAAGtB,KAAKuB,2BACZC,MAAMC,IACLzB,KAAK0B,eAAiBD,EAAIE,QAE3BC,OAAMC,GAAOC,QAAQC,IAAIF,KAuB9B/B,SACE,OACEkC,EAACC,EAAI,KACHD,EAAA,MAAA,CAAKE,MAAM,gCACTF,EAAA,MAAA,KACEA,EAAA,MAAA,CAAKE,MAAM,WACTF,EAAA,MAAA,CAAKE,MAAM,kBACTF,EAAA,kBAAA,CACEzB,QAASP,KAAKO,QACdgB,IAAKvB,KAAKuB,IACVP,aAAchB,KAAKgB,aACnBb,kBAAmBH,KAAKG,kBACxBuB,eAAgB1B,KAAK0B,qBAM/BM,EAAA,MAAA,CAAKE,MAAM,4BACTF,EAAA,uBAAA,CACET,IAAKvB,KAAKuB,IACVnB,MAAOJ,KAAKI,MACZC,OAAQL,KAAKK,OACb8B,UAAWnC,KAAKY,MAChBD,YAAaX,KAAKW,YAClBE,YAAab,KAAKa,YAClBC,gBAAiBd,KAAKc,gBACtBoB,MAAM,OACN5B,QAASN,KAAKM","sourcesContent":[":host {\n  display: block;\n}\n","import { Component, Host, h, Prop, State } from '@stencil/core';\nimport axios from 'axios';\n\n@Component({\n  tag: 'all-users',\n  styleUrl: 'all-users.css',\n  scoped: true,\n})\nexport class AllUsers {\n  @Prop() users: string;\n  @Prop() url: string;\n  @Prop() permissions: string;\n  @Prop() count: number;\n  @Prop() limitbackend: number = 1;\n  @Prop() offsetbackend: number = 0;\n  @State() allPermissions: {}[];\n  @State() parsedPermissions: [] = [];\n  @State() updatedUsers: any;\n  @State() limit: number = 50;\n  @State() offset: number = 0;\n  @State() loading = false;\n\n  refresh = () => {\n    window.location.assign(`/users?offset=${this.offset}&limit=${this.limit}`);\n  };\n\n  componentWillLoad() {\n    this.limit = this.limitbackend;\n    this.offset = this.offsetbackend;\n    this.updatedUsers = JSON.parse(this.users);\n    this.parsedPermissions = JSON.parse(this.permissions);\n\n    axios\n      .get(`${this.url}/api/permissions/all`)\n      .then((res: any) => {\n        this.allPermissions = res.data;\n      })\n      .catch(err => console.log(err));\n  }\n\n  // pagination functions\n  nextHandler = () => {\n    this.loading = true;\n    if (this.offset + this.limit < this.count) this.offset = this.offset + this.limit;\n    this.refresh();\n    this.loading = false;\n  };\n  prevHandler = () => {\n    this.loading = true;\n    if (this.offset - this.limit >= 0) this.offset = this.offset - this.limit;\n    this.refresh();\n    this.loading = false;\n  };\n  jumpPageHandler = pageNumber => {\n    this.loading = true;\n    this.offset = pageNumber * this.limit - this.limit;\n    this.refresh();\n    this.loading = false;\n  };\n\n  render() {\n    return (\n      <Host>\n        <div class=\"text-gray-600 body-font pt-8\">\n          <div>\n            <div class=\"mx-auto\">\n              <div class=\"flex flex-wrap\">\n                <users-component\n                  refresh={this.refresh}\n                  url={this.url}\n                  updatedUsers={this.updatedUsers}\n                  parsedPermissions={this.parsedPermissions}\n                  allPermissions={this.allPermissions}\n                ></users-component>\n              </div>\n            </div>\n          </div>\n        </div>\n        <div class=\"flex justify-center my-4\">\n          <pagination-component\n            url={this.url}\n            limit={this.limit}\n            offset={this.offset}\n            totalData={this.count}\n            nextHandler={this.nextHandler}\n            prevHandler={this.prevHandler}\n            jumpPageHandler={this.jumpPageHandler}\n            class=\"mt-2\"\n            loading={this.loading}\n          ></pagination-component>\n        </div>\n      </Host>\n    );\n  }\n}\n"]}