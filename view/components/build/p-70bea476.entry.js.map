{"version":3,"sources":["src/components/permissionPage/add-role/add-role.css?tag=add-role&encapsulation=scoped","src/components/permissionPage/add-role/add-role.tsx"],"names":["addRoleCss","AddRole","[object Object]","hostRef","this","isModalOpen","e","preventDefault","axios","post","url","roleName","value","refresh","Swal","fire","position","icon","text","showConfirmButton","timer","toggleModalState","error","title","_a","response","data","event","target","h","Host","disabled","hasAccess","parsedPermissions","name","permission","clickHandler","varient","color","onSubmit","handlenewRoleSumit","class","action","aria-labelledby","role","aria-modal","aria-hidden","xmlns","fill","viewBox","stroke","stroke-width","stroke-linecap","stroke-linejoin","d","id","type","required","placeholder","onInput","handleChange"],"mappings":"sLAAA,MAAMA,EAAa,oCCUNC,EAAO,MALpBC,YAAAC,aASWC,KAAAC,YAAc,MAGvBH,mBACEE,KAAKC,aAAeD,KAAKC,YAG3BH,yBAAyBI,SACvBA,EAAEC,iBACF,UACQC,EAAMC,KAAKL,KAAKM,IAAK,CACzBC,SAAUP,KAAKQ,cAEXR,KAAKS,UACXC,EAAKC,KAAK,CACRC,SAAU,SACVC,KAAM,UACNC,KAAM,kBACNC,kBAAmB,MACnBC,MAAO,OAEThB,KAAKQ,MAAQ,GACbR,KAAKiB,mBACL,MAAOC,GACPR,EAAKC,KAAK,CACRE,KAAM,QACNM,MAAO,UACPL,OAAMM,EAAAF,IAAK,MAALA,SAAK,OAAA,EAALA,EAAOG,YAAQ,MAAAD,SAAA,OAAA,EAAAA,EAAEE,OAAQ,iCAKrCxB,aAAayB,GACXvB,KAAKQ,MAAQe,EAAMC,OAAOhB,MAG5BV,SACE,OACE2B,EAACC,EAAI,KAEHD,EAAA,2BAAA,CACEN,MAAM,eACNQ,UAAWC,EAAU5B,KAAK6B,kBAAmB,CAAEC,KAAM,cAAeC,WAAY,UAChFC,aAAc,IAAMhC,KAAKiB,mBACzBgB,QAAQ,WACRC,MAAM,YAAU,YAMjBlC,KAAKC,aACJwB,EAAA,OAAA,CAAMU,SAAUjC,GAAKF,KAAKoC,mBAAmBlC,GAAImC,MAAM,YAAYC,OAAO,WACxEb,EAAA,MAAA,CAAKY,MAAM,qCAAoCE,kBAAiB,cAAcC,KAAK,SAAQC,aAAY,QACrGhB,EAAA,MAAA,CAAKY,MAAM,0FACTZ,EAAA,MAAA,CAAKY,MAAM,6DAA4DK,cAAa,SAGpFjB,EAAA,OAAA,CAAMY,MAAM,qDAAoDK,cAAa,QAAM,KAInFjB,EAAA,MAAA,CAAKY,MAAM,qKACTZ,EAAA,MAAA,CAAKY,MAAM,0CACTZ,EAAA,MAAA,CAAKY,MAAM,0BACTZ,EAAA,MAAA,CAAKY,MAAM,oHACTZ,EAAA,MAAA,CAAKkB,MAAM,6BAA6BN,MAAM,uBAAuBO,KAAK,OAAOC,QAAQ,YAAYC,OAAO,eAAcC,eAAc,KACtItB,EAAA,OAAA,CAAAuB,iBAAqB,QAAOC,kBAAiB,QAAQC,EAAE,wDAG3DzB,EAAA,MAAA,CAAKY,MAAM,iDACTZ,EAAA,KAAA,CAAIY,MAAM,8CAA8Cc,GAAG,eAAa,gBAGxE1B,EAAA,MAAA,CAAKY,MAAM,QACTZ,EAAA,IAAA,CAAGY,MAAM,8BAA4B,8DACrCZ,EAAA,QAAA,CACE2B,KAAK,OACLtB,KAAK,OACLuB,SAAQ,KACRC,YAAY,YACZjB,MAAM,6CACN7B,MAAOR,KAAKQ,MACZ+C,QAAShC,GAASvB,KAAKwD,aAAajC,SAM9CE,EAAA,MAAA,CAAKY,MAAM,kEACTZ,EAAA,2BAAA,CAA0BN,MAAM,mBAAmBiC,KAAK,SAASlB,MAAM,WAAWD,QAAQ,aAAW,gBAIrGR,EAAA,2BAAA,CAA0BN,MAAM,kBAAkBa,aAAc,IAAMhC,KAAKiB,mBAAoBiB,MAAM,YAAYD,QAAQ,YAAU","sourcesContent":[":host {\n  display: block;\n}\n","import { Component, Host, h, State, Prop } from '@stencil/core';\nimport axios from 'axios';\nimport Swal from 'sweetalert2';\nimport { hasAccess } from '../../../utils/utils';\n\n@Component({\n  tag: 'add-role',\n  styleUrl: 'add-role.css',\n  scoped: true,\n})\nexport class AddRole {\n  @Prop() url: string;\n  @Prop() refresh: any;\n  @Prop() parsedPermissions: [];\n  @State() isModalOpen = false;\n  @State() value: string;\n\n  toggleModalState() {\n    this.isModalOpen = !this.isModalOpen;\n  }\n\n  async handlenewRoleSumit(e) {\n    e.preventDefault();\n    try {\n      await axios.post(this.url, {\n        roleName: this.value,\n      });\n      await this.refresh();\n      Swal.fire({\n        position: 'center',\n        icon: 'success',\n        text: 'Added new role!',\n        showConfirmButton: false,\n        timer: 1500,\n      });\n      this.value = '';\n      this.toggleModalState();\n    } catch (error) {\n      Swal.fire({\n        icon: 'error',\n        title: 'Oops...',\n        text: error?.response?.data || 'Failed to create a new role',\n      });\n    }\n  }\n\n  handleChange(event) {\n    this.value = event.target.value;\n  }\n\n  render() {\n    return (\n      <Host>\n        {/* Modal Button */}\n        <icon-label-submit-button\n          title=\"Add New Role\"\n          disabled={!hasAccess(this.parsedPermissions, { name: 'permissions', permission: 'write' })}\n          clickHandler={() => this.toggleModalState()}\n          varient=\"outlined\"\n          color=\"tertiary\"\n        >\n          Add Role\n        </icon-label-submit-button>\n\n        {/* Main Modal */}\n        {this.isModalOpen && (\n          <form onSubmit={e => this.handlenewRoleSumit(e)} class=\"space-y-3\" action=\"/invite\">\n            <div class=\"fixed z-10 inset-0 overflow-y-auto\" aria-labelledby=\"modal-title\" role=\"dialog\" aria-modal=\"true\">\n              <div class=\"flex items-end justify-center min-h-screen pt-4 px-4 pb-20 text-center sm:block sm:p-0\">\n                <div class=\"fixed inset-0 bg-gray-500 bg-opacity-75 transition-opacity\" aria-hidden=\"true\"></div>\n\n                {/* <!-- This element is to trick the browser into centering the modal contents. --> */}\n                <span class=\"hidden sm:inline-block sm:align-middle sm:h-screen\" aria-hidden=\"true\">\n                  &#8203;\n                </span>\n\n                <div class=\"relative inline-block align-bottom bg-white rounded-lg text-left overflow-hidden shadow-xl transform transition-all sm:my-8 sm:align-middle sm:max-w-lg sm:w-full\">\n                  <div class=\"bg-white px-4 pt-5 pb-4 sm:p-6 sm:pb-4\">\n                    <div class=\"sm:flex sm:items-start\">\n                      <div class=\"mx-auto flex-shrink-0 flex items-center justify-center h-12 w-12 rounded-full bg-sky-100 sm:mx-0 sm:h-10 sm:w-10\">\n                        <svg xmlns=\"http://www.w3.org/2000/svg\" class=\"h-6 w-6 text-sky-600\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\" stroke-width=\"2\">\n                          <path stroke-linecap=\"round\" stroke-linejoin=\"round\" d=\"M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z\" />\n                        </svg>\n                      </div>\n                      <div class=\"mt-3 text-center sm:mt-0 sm:ml-4 sm:text-left\">\n                        <h3 class=\"text-lg leading-6 font-medium text-gray-900\" id=\"modal-title\">\n                          Add New Role\n                        </h3>\n                        <div class=\"mt-2\">\n                          <p class=\"text-sm text-gray-500 mb-4\">Are you sure you want to create new role? Enter role name.</p>\n                          <input\n                            type=\"name\"\n                            name=\"name\"\n                            required\n                            placeholder=\"Role Name\"\n                            class=\"border w-full px-4 py-2 rounded-md text-sm\"\n                            value={this.value}\n                            onInput={event => this.handleChange(event)}\n                          />\n                        </div>\n                      </div>\n                    </div>\n                  </div>\n                  <div class=\"bg-gray-50 px-4 py-3 sm:px-6 sm:flex sm:flex-row-reverse gap-4\">\n                    <icon-label-submit-button title=\"Confirm New Role\" type=\"submit\" color=\"tertiary\" varient=\"contained\">\n                      Confirm Role\n                    </icon-label-submit-button>\n\n                    <icon-label-submit-button title=\"Cancel New Role\" clickHandler={() => this.toggleModalState()} color=\"secondary\" varient=\"outlined\">\n                      Cancel\n                    </icon-label-submit-button>\n                  </div>\n                </div>\n              </div>\n            </div>\n          </form>\n        )}\n      </Host>\n    );\n  }\n}\n"]}