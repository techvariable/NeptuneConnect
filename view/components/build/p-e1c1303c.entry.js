import{r as e,h as t,H as s}from"./p-584c1979.js";import{a}from"./p-18b27c92.js";let l=class{constructor(t){e(this,t);this.isLoading=false;this.isLoadingError=false;this.total=null;this.tableData=[]}async fetchData(){this.isLoading=true;this.isLoadingError=false;try{const e=await a.get(`${this.url}api/editor/query/logs?limit=49&offset=0&filter_email=${this.user}&order=desc`);e.data.respond.map((e=>{e.isCustomQuery===true?e["isCustomQuery"]="Custom Query":e["isCustomQuery"]="Builder Query"}));this.total=e.data.total;this.total=e.data.total;this.tableData=e.data.respond;this.isLoading=false}catch(e){console.log("error",e)}}componentWillLoad(){this.fetchData()}render(){let e=Object.keys(this.tableData[0]||{}).map((e=>{const t=e.replace(/([A-Z])/g," $1");const s=t.charAt(0).toUpperCase()+t.slice(1);return{id:e,name:e==="isCustomQuery"?"Query Type":s,key:e,type:e==="timeOfExecution"?"datetime":"string",isSortable:false,isEditable:false,isFilterable:false,isDeletable:false,suffix:e==="timeTaken"?" ms":"",maxChar:50,customStyle:{headerStyle:{textTransform:"uppercase"},headerClass:"px-6 py-4",cellClass:"px-6 py-4"}}}));e=e.filter((e=>!["ownerId","email","queryResult","queryStatus","id"].includes(e.key)));e.push({id:"queryResult",name:"Log File",key:"queryResult",type:"string",isSortable:false,isEditable:false,isFilterable:false,isDeletable:false,customRowComponent:e=>t("a",{target:"_blank",href:"/editor/query/logs/"+e,class:"mx-4 flex items-center py-1 px-4 text-base font-normal text-gray-900 rounded-lg bg-gray-200"},t("img",{class:"h-4",src:"https://i.stack.imgur.com/To3El.png",alt:"icon"}),t("span",{class:"px-2 "},"View")),customStyle:{headerStyle:{textTransform:"uppercase"},headerClass:"px-6 py-4"}});const a=this.tableData.map((t=>{const s={};e.forEach((e=>{const a=e.key;switch(a){case"timeOfExecution":s[a]=new Date(t[a]);break;default:s[a]=t[a];break}}));return s}));return t(s,{class:"border-b-2 border-gray-200"},a.length>0?t("data-table",{showActions:false,columns:e,data:a,customStyle:{maxHeight:"16rem"}}):t("h2",{class:"font-mono text-lg text-center font-bold leading-7 text-gray-400"},"No Log Data Available"))}};export{l as last_logs};
//# sourceMappingURL=p-e1c1303c.entry.js.map